<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/base.html}">
<head>
  <meta charset="UTF-8">
  <title>Tier 및 User 조회</title>
</head>
<body>
<div id="fh5co-main" layout:fragment="content">
  <div class="fh5co-narrow-content animate-box" data-animate-effect="fadeInLeft">
    <div class="row">
      <!-- Tier 조회 섹션 -->
      <div class="col-md-12">
        <h2>Tier 조회</h2>
        <div class="row">
          <div class="col-md-12 text-end">
            <button class="btn btn-primary add-tier-btn">Add Tier</button>
          </div>
        </div>
        <!-- Tier 조회 테이블 -->
        <div class="row">
          <div class="col-md-12">
            <table class="table table-striped">
              <thead>
              <tr>
                <th>Tier ID</th>
                <th>Tier 이름</th>
                <th>최소 소비 금액</th>
                <th>최대 소비 금액</th>
                <th>할인율 (%)</th>
              </tr>
              </thead>
              <tbody>
              <tr th:each="tier : ${tiers}">
                <td th:text="${tier.tierId}"></td>
                <td th:text="${tier.tierName}"></td>
                <td th:text="${tier.minSpent} + ' 원'"></td>
                <td th:text="${tier.maxSpent} + ' 원'"></td>
                <td th:text="${tier.discountRate} + '%'"></td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <hr> <!-- 구분선 추가 -->

      <!-- User 조회 섹션 -->
      <div class="col-md-12">
        <h2>User 조회</h2>
        <!-- User 조회 테이블 -->
        <div class="row">
          <div class="col-md-12">
            <table class="table table-striped">
              <thead>
              <tr>
                <th>User ID</th>
                <th>이름</th>
                <th>Email</th>
                <th>전화번호</th>
                <th>주소</th>
                <th>우편번호</th>
                <th>Tier</th>
              </tr>
              </thead>
              <tbody>
              <tr th:each="user : ${users}" onclick="openEditUserModal(${user.userId})">
                <td th:text="${user.userId}"></td>
                <td th:text="${user.name}"></td>
                <td th:text="${user.email}"></td>
                <td th:text="${user.phoneNumber}"></td>
                <td th:text="${user.address1} + ' ' + ${user.address2}"></td>
                <td th:text="${user.postcode}"></td>
                <td th:text="${user.tierName}"></td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tier 추가 모달 -->
  <div id="addTierModal" class="modal" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Tier 추가</h4>
          <button type="button" class="close" onclick="closeAddTierModal()">&times;</button>
        </div>
        <div class="modal-body">
          <form id="addTierForm">
            <div class="form-group">
              <label for="tierName">Tier 이름</label>
              <input type="text" class="form-control" id="tierName" required>
            </div>
            <div class="form-group">
              <label for="minSpent">최소 소비 금액</label>
              <input type="number" class="form-control" id="minSpent" required>
            </div>
            <div class="form-group">
              <label for="maxSpent">최대 소비 금액</label>
              <input type="number" class="form-control" id="maxSpent" required>
            </div>
            <div class="form-group">
              <label for="discountRate">할인율 (%)</label>
              <input type="number" class="form-control" id="discountRate" required>
            </div>
            <button type="submit" class="btn btn-primary">Tier 추가</button>
          </form>
        </div>
      </div>
    </div>
  </div>

</div>

<th:block layout:fragment="javascript">
  <script th:src="@{/js/admin/tier-management.js}"></script>
  <script th:src="@{/js/admin/user-management.js}"></script>
</th:block>
</body>
</html>