<!DOCTYPE html>
<html class="no-js" lang="ko"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/base.html}">

<body>
	<div id="fh5co-main" layout:fragment="content">
		<!-- 비밀번호 변경 모달 -->
		<div class="modal chnPwModal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">비밀번호 변경하기</h4>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="input-group mb-3">
							<div class="input-group">새 비밀번호</div>
							<input type="password" class="form-control" name="password">
						</div>
						<div class="input-group mb-3">
							<div class="input-group">비밀번호 확인</div>
							<input type="password" class="form-control" name="chkPassword">
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary updPwBtn">변경 완료</button>
					</div>
				</div>
			</div>
		</div>
		<!-- 후기 상세 모달 -->
		<div class="modal rvDtlModal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title">후기 상세</h4>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<input type="hidden" name="reviewId">
						<div class="input-group mb-3">
							<div class="input-group">관람 공연</div>
							<select class="form-control" name="booking" disabled></select>
						</div>
						<div class="input-group mb-3">
							<div class="input-group">내용</div>
							<textarea class="form-control" rows="20" name="rvContent" style="resize: none" disabled></textarea>
						</div>
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-primary updRvBtn" value="수정하기">
						<input type="button" class="btn btn-primary delRvBtn" value="삭제하기">
					</div>
				</div>
			</div>
		</div>
		<div class="fh5co-narrow-content animate-box" data-animate-effect="fadeInLeft">
			<div class="row">
				<div class="col-md-4">
					<h2>마이 페이지</h2>
					<!-- Thymeleaf를 사용하여 서버에서 userId 값을 HTML에 직접 삽입 -->
					<div>
						<input type="hidden" th:value="${user.uid}" id="username">
					</div>
				</div>
			</div>
			<form>
				<div class="row">
					<div class="col-lg-12">
						<div class="row">
							<!-- 내 정보 폼 -->
							<div class="col-lg-6">
								<label>아이디</label>
								<div class="form-group d-flex">
									<div class="col-lg-8" style="padding-left: 0;">
										<input type="text" name="userId" class="form-control" disabled>
									</div>
									<div class="col-lg-4 d-flex align-items-center p-0">
										<input type="button" class="btn btn-info w-100 chnPwBtn" value="PW 변경">
									</div>
								</div>
								<label>이름</label>
								<div class="form-group">
									<div class="col-lg-8" style="padding-left: 0;">
										<input type="text" name="name" class="form-control" required disabled>
									</div>
									<div class="col-lg-4 p-0">
										<input type="text" name="tierName" class="form-control" disabled>
									</div>
								</div>
								<label style="margin-top: 10px">이메일</label>
								<div class="form-group">
									<input type="email" name="email" class="form-control" required disabled>
								</div>
								<label>연락처</label>
								<div class="form-group">
									<input type="tel" name="phoneNumber" class="form-control" placeholder="010-1234-5678" pattern="^(?:0)(?:10|11|12|13|14|15|16|17|18|19)-\d{3,4}-\d{4}$" required disabled>
								</div>
								<label>주소</label>
								<div class="form-group">
									<input type="text" name="address1" class="form-control" required disabled>
									<div class="col-lg-8" style="padding-left: 0;">
										<input type="text" name="address2" class="form-control" placeholder="상세주소" disabled>
									</div>
									<div class="col-lg-4 p-0">
										<input type="text" name="postcode" class="form-control" required disabled>
									</div>
								</div>
								<div class="form-group">
									<input type="button" class="btn btn-primary btn-md updUserBtn" style="margin-top: 20px" value="정보 수정">
									<input type="button" class="btn btn-primary btn-md delUserBtn" style="margin-top: 20px" value="회원 탈퇴">
								</div>
							</div>
							<!-- 예매내역, 후기목록, QnA -->
							<div class="col-lg-6">
								<label class="fs-2">예매내역</label>
								<div class="form-group d-flex">
									<input type="radio" class="radio-inline" name="bookStatus" value="" checked>전체
									<input type="radio" class="radio-inline" name="bookStatus" value="1">예매
									<input type="radio" class="radio-inline" name="bookStatus" value="0">취소
								</div>
								<div id="bookingGrid"></div>
								<label class="fs-2">후기목록</label>
								<div id="reviewGrid"></div>
								<label class="fs-2">문의내역</label>
								<div id="myQnaGrid"></div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>

	<!-- js import -->
	<th:block layout:fragment="javascript">
		<script th:inline="javascript">
			const loginUser = [[${session.user}]];
			console.log(loginUser);
			const chnPwModal = new bootstrap.Modal(document.querySelector('.chnPwModal'));
			const rvDtlModal = new bootstrap.Modal(document.querySelector('.rvDtlModal'));
		</script>
		<script th:src="@{/js/user/mypage.js}"></script>
	</th:block>
</body>
</html>

